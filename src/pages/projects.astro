---
import { getCollection } from "astro:content";
import Layout from "../layouts/Layout.astro";
import Header from "../components/layout/Header.astro";
import Footer from "../components/layout/Footer.astro"; 
import ProjectCard from "../components/content/ProjectCard.astro";

const allProjects = await getCollection("projects");
const projects = allProjects.sort((a, b) => {
  if (a.data.featured && !b.data.featured) return -1;
  if (!a.data.featured && b.data.featured) return 1;
  if (a.data.order !== b.data.order) return a.data.order - b.data.order;
  return new Date(b.data.date).getTime() - new Date(a.data.date).getTime();
});
---

<Layout title="Projects | Code & Karma" description="Explore my latest projects, experiments, and open-source contributions in web development">
  <div class="min-h-screen flex flex-col bg-background text-foreground">
    <Header />

    <main class="flex-1">
      <!-- Hero Section -->
      <section class="relative isolate overflow-hidden bg-[#0A0C10] py-16 md:py-24">
        <!-- Background effects -->
        <div
          class="pointer-events-none absolute inset-0 -z-10 bg-[radial-gradient(800px_400px_at_50%_110%,rgba(255,0,255,0.08),transparent_60%)] anim-aura"
          style="animation: auraPulse 15s ease-in-out infinite;"
        >
        </div>
        
        <div class="container mx-auto px-4">
          <div class="max-w-3xl">
            <h1 class="text-4xl md:text-6xl font-extrabold tracking-tight select-none bg-linear-to-r from-primary via-[#FF00FF] to-[#FF00FF] bg-clip-text text-transparent neon-heading">
              Projects & Experiments
            </h1>

            <p class="mt-6 text-lg md:text-xl text-zinc-400 leading-relaxed">
              A collection of my latest projects, experiments, and contributions to the open-source community. From production apps to creative coding experiments.
            </p>

            <!-- Stats -->
            <div class="mt-8 flex flex-wrap gap-6 text-sm">
              <div class="flex items-center gap-2 text-primary">
                <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19.428 15.428a2 2 0 00-1.022-.547l-2.387-.477a6 6 0 00-3.86.517l-.318.158a6 6 0 01-3.86.517L6.05 15.21a2 2 0 00-1.806.547M8 4h8l-1 1v5.172a2 2 0 00.586 1.414l5 5c1.26 1.26.367 3.414-1.415 3.414H4.828c-1.782 0-2.674-2.154-1.414-3.414l5-5A2 2 0 009 10.172V5L8 4z"></path>
                </svg>
                <span>{projects.length} Projects</span>
              </div>
              
              <div class="flex items-center gap-2 text-secondary">
                <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 20l4-16m4 4l4 4-4 4M6 16l-4-4 4-4"></path>
                </svg>
                <span>Open Source</span>
              </div>
            </div>
          </div>
        </div>
      </section>

      <!-- Projects Grid -->
      <section class="container py-16">
        <div class="grid gap-8 md:grid-cols-2">
          {projects.map((project) => (
            <ProjectCard
              slug={project.slug}
              title={project.data.title}
              description={project.data.description}
              technologies={project.data.technologies}
              status={project.data.status}
              github={project.data.github}
              demo={project.data.demo}
              image={project.data.image}
              color={project.data.color}
              featured={project.data.featured}
              date={project.data.date}
            />
          ))}
        </div>
      </section>

    </main>

    <Footer />
  </div>
</Layout>