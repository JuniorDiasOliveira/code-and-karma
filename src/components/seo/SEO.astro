---
import { siteConfig } from '../../config/site';

interface Props {
  title: string;
  description: string;
  image?: string;
  noindex?: boolean;
  nofollow?: boolean;
  canonical?: string;
}

const { 
  title, 
  description, 
  image = siteConfig.defaultOGImage,
  noindex = false,
  nofollow = false,
  canonical
} = Astro.props;

const robots = [
  noindex ? 'noindex' : 'index',
  nofollow ? 'nofollow' : 'follow'
].join(', ');

const fullCanonical = canonical || new URL(Astro.url.pathname, siteConfig.url).toString();
const fullImageUrl = new URL(image, siteConfig.url).toString();
---

<!-- SEO Meta Tags -->
<meta name="robots" content={robots} />
<meta name="description" content={description} />
{canonical && <link rel="canonical" href={fullCanonical} />}

<!-- Open Graph -->
<meta property="og:title" content={title} />
<meta property="og:description" content={description} />
<meta property="og:image" content={fullImageUrl} />
<meta property="og:url" content={fullCanonical} />

<!-- Twitter -->
<meta name="twitter:title" content={title} />
<meta name="twitter:description" content={description} />
<meta name="twitter:image" content={fullImageUrl} />

<!-- Additional meta tags for specific pages -->
<slot />